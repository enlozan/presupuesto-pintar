<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painters Madrid - Presupuestos de Pintura</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Encabezado */
        .header {
            background-color: #2c3e50;
            color: white;
            padding: 25px 0;
            text-align: center;
            border-radius: 0 0 10px 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
        }
        
        .logo-icon {
            font-size: 2.5rem;
            margin-right: 15px;
            color: #e74c3c;
        }
        
        .company-name {
            font-size: 2.8rem;
            font-weight: 700;
            letter-spacing: 1px;
        }
        
        .company-tagline {
            font-size: 1.2rem;
            opacity: 0.9;
            font-weight: 300;
        }
        
        /* Secciones principales */
        .app-section {
            background-color: white;
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
        }
        
        .section-title {
            color: #2c3e50;
            font-size: 1.8rem;
            margin-bottom: 25px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3498db;
            display: flex;
            align-items: center;
        }
        
        .section-title i {
            margin-right: 10px;
            color: #3498db;
        }
        
        /* Formulario */
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-row {
            display: flex;
            flex-wrap: wrap;
            margin: 0 -10px;
        }
        
        .form-col {
            flex: 1;
            min-width: 250px;
            padding: 0 10px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        input, select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #3498db;
        }
        
        .radio-group, .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 5px;
        }
        
        .radio-option, .checkbox-option {
            display: flex;
            align-items: center;
        }
        
        .radio-option input, .checkbox-option input {
            width: auto;
            margin-right: 8px;
        }
        
        /* Botones */
        .button-group {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }
        
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 5px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .btn-primary {
            background-color: #3498db;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        }
        
        .btn-success {
            background-color: #2ecc71;
            color: white;
        }
        
        .btn-success:hover {
            background-color: #27ae60;
            transform: translateY(-2px);
        }
        
        .btn-whatsapp {
            background-color: #25d366;
            color: white;
        }
        
        .btn-whatsapp:hover {
            background-color: #1da851;
            transform: translateY(-2px);
        }
        
        .btn:disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
            transform: none;
        }
        
        /* Presupuesto */
        .budget-result {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 25px;
            margin-top: 30px;
            border-left: 5px solid #3498db;
        }
        
        .budget-title {
            font-size: 1.5rem;
            color: #2c3e50;
            margin-bottom: 15px;
        }
        
        .budget-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .budget-item {
            padding: 10px;
            background-color: white;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        
        .budget-label {
            font-size: 0.9rem;
            color: #7f8c8d;
        }
        
        .budget-value {
            font-size: 1.3rem;
            font-weight: 700;
            color: #2c3e50;
        }
        
        .budget-total {
            text-align: center;
            font-size: 2rem;
            font-weight: 700;
            color: #e74c3c;
            margin-top: 10px;
            padding-top: 20px;
            border-top: 2px dashed #ddd;
        }
        
        /* Calendario */
        .calendar-section {
            display: none;
        }
        
        .calendar-container {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin-top: 20px;
        }
        
        .calendar {
            flex: 1;
            min-width: 300px;
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }
        
        .calendar-day {
            padding: 10px;
            text-align: center;
            background-color: #f8f9fa;
            border-radius: 5px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .calendar-date {
            padding: 12px;
            text-align: center;
            background-color: white;
            border: 1px solid #eee;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .calendar-date:hover {
            background-color: #3498db;
            color: white;
        }
        
        .calendar-date.selected {
            background-color: #2ecc71;
            color: white;
            font-weight: bold;
        }
        
        .calendar-date.disabled {
            background-color: #ecf0f1;
            color: #bdc3c7;
            cursor: not-allowed;
        }
        
        .contact-form {
            flex: 1;
            min-width: 300px;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .form-row {
                flex-direction: column;
            }
            
            .form-col {
                width: 100%;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .calendar-container {
                flex-direction: column;
            }
            
            .company-name {
                font-size: 2rem;
            }
        }
        
        /* Mensajes */
        .message {
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            display: none;
        }
        
        .message.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .message.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Encabezado -->
        <header class="header">
            <div class="logo">
                <i class="fas fa-paint-roller logo-icon"></i>
                <h1 class="company-name">Painters Madrid</h1>
            </div>
            <p class="company-tagline">Expertos en pintura de viviendas en Madrid y alrededores</p>
        </header>
        
        <!-- Sección de datos del cliente -->
        <section class="app-section" id="client-data">
            <h2 class="section-title"><i class="fas fa-home"></i> Datos del trabajo de pintura</h2>
            
            <div id="message" class="message"></div>
            
            <form id="budget-form">
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label for="location"><i class="fas fa-map-marker-alt"></i> Ubicación de la vivienda</label>
                            <input type="text" id="location" required placeholder="Ej: Centro Madrid, Chamberí, etc.">
                        </div>
                        
                        <div class="form-group">
                            <label for="square-meters"><i class="fas fa-ruler-combined"></i> Metros cuadrados de la vivienda</label>
                            <input type="number" id="square-meters" min="10" max="500" required placeholder="Ej: 75">
                        </div>
                        
                        <div class="form-group">
                            <label><i class="fas fa-couch"></i> ¿Está amueblada la vivienda?</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" id="furnished-yes" name="furnished" value="yes" required>
                                    <label for="furnished-yes">Sí</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="furnished-no" name="furnished" value="no" required>
                                    <label for="furnished-no">No</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-col">
                        <div class="form-group">
                            <label for="rooms"><i class="fas fa-bed"></i> Número de habitaciones</label>
                            <select id="rooms" required>
                                <option value="">Seleccione</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 o más</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="bathrooms"><i class="fas fa-bath"></i> Número de baños</label>
                            <select id="bathrooms" required>
                                <option value="">Seleccione</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4 o más</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label><i class="fas fa-texture"></i> ¿Las paredes tienen textura (gotele) o son lisas?</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" id="texture-gotele" name="texture" value="gotele" required>
                                    <label for="texture-gotele">Gotele</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="texture-smooth" name="texture" value="smooth" required>
                                    <label for="texture-smooth">Lisas</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label><i class="fas fa-palette"></i> ¿Cómo están pintadas las paredes actualmente?</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" id="current-white" name="current-color" value="white" required>
                                    <label for="current-white">Blanco</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="current-colors" name="current-color" value="colors" required>
                                    <label for="current-colors">Colores</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-col">
                        <div class="form-group">
                            <label for="desired-finish"><i class="fas fa-brush"></i> ¿Cómo desea pintarlo ahora?</label>
                            <select id="desired-finish" required>
                                <option value="">Seleccione</option>
                                <option value="white">Blanco</option>
                                <option value="light-colors">Colores claros</option>
                                <option value="dark-colors">Colores oscuros</option>
                                <option value="smooth">Alisar paredes</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="button-group">
                    <button type="button" id="calculate-btn" class="btn btn-primary">
                        <i class="fas fa-calculator"></i> Calcular Presupuesto
                    </button>
                </div>
            </form>
        </section>
        
        <!-- Sección de presupuesto -->
        <section class="app-section" id="budget-section" style="display: none;">
            <h2 class="section-title"><i class="fas fa-file-invoice-dollar"></i> Presupuesto calculado</h2>
            
            <div class="budget-result">
                <h3 class="budget-title">Detalles del presupuesto</h3>
                
                <div class="budget-details">
                    <div class="budget-item">
                        <div class="budget-label">Ubicación</div>
                        <div class="budget-value" id="budget-location">-</div>
                    </div>
                    
                    <div class="budget-item">
                        <div class="budget-label">Metros cuadrados</div>
                        <div class="budget-value" id="budget-square-meters">-</div>
                    </div>
                    
                    <div class="budget-item">
                        <div class="budget-label">Amueblada</div>
                        <div class="budget-value" id="budget-furnished">-</div>
                    </div>
                    
                    <div class="budget-item">
                        <div class="budget-label">Tipo de trabajo</div>
                        <div class="budget-value" id="budget-work-type">-</div>
                    </div>
                </div>
                
                <div class="budget-details">
                    <div class="budget-item">
                        <div class="budget-label">Precio base</div>
                        <div class="budget-value" id="budget-base-price">- €</div>
                    </div>
                    
                    <div class="budget-item">
                        <div class="budget-label">Recargo por colores</div>
                        <div class="budget-value" id="budget-color-surcharge">- €</div>
                    </div>
                    
                    <div class="budget-item">
                        <div class="budget-label">Recargo por amueblado</div>
                        <div class="budget-value" id="budget-furniture-surcharge">- €</div>
                    </div>
                    
                    <div class="budget-item">
                        <div class="budget-label">Recargo por alisado</div>
                        <div class="budget-value" id="budget-smoothing-surcharge">- €</div>
                    </div>
                </div>
                
                <div class="budget-total">
                    <div>Total estimado:</div>
                    <div id="budget-total">0 €</div>
                </div>
            </div>
            
            <div class="button-group">
                <button type="button" id="accept-budget-btn" class="btn btn-success">
                    <i class="fas fa-check-circle"></i> Aceptar Presupuesto
                </button>
                <button type="button" id="modify-budget-btn" class="btn btn-primary">
                    <i class="fas fa-edit"></i> Modificar Datos
                </button>
            </div>
        </section>
        
        <!-- Sección de calendario y contacto -->
        <section class="app-section calendar-section" id="calendar-section">
            <h2 class="section-title"><i class="fas fa-calendar-alt"></i> Programar el trabajo</h2>
            <p>Seleccione una fecha para realizar el trabajo y proporcione sus datos de contacto.</p>
            
            <div class="calendar-container">
                <div class="calendar">
                    <div class="calendar-header">
                        <h3>Seleccione fecha</h3>
                        <div>
                            <button id="prev-month" class="btn btn-primary" style="padding: 5px 10px; font-size: 0.9rem;">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <span id="current-month" style="margin: 0 10px; font-weight: 600;">Febrero 2023</span>
                            <button id="next-month" class="btn btn-primary" style="padding: 5px 10px; font-size: 0.9rem;">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="calendar-grid" id="calendar-days">
                        <!-- Los días de la semana se generan con JavaScript -->
                    </div>
                    
                    <div class="calendar-grid" id="calendar-dates">
                        <!-- Las fechas se generan con JavaScript -->
                    </div>
                </div>
                
                <div class="contact-form">
                    <div class="form-group">
                        <label for="client-name"><i class="fas fa-user"></i> Nombre completo</label>
                        <input type="text" id="client-name" required placeholder="Su nombre y apellidos">
                    </div>
                    
                    <div class="form-group">
                        <label for="client-phone"><i class="fas fa-phone"></i> Teléfono de contacto</label>
                        <input type="tel" id="client-phone" required placeholder="Ej: 612345678">
                    </div>
                    
                    <div class="form-group">
                        <label for="selected-date"><i class="fas fa-calendar-check"></i> Fecha seleccionada</label>
                        <input type="text" id="selected-date" readonly placeholder="Seleccione una fecha en el calendario">
                    </div>
                    
                    <div class="form-group">
                        <label for="notes"><i class="fas fa-sticky-note"></i> Notas adicionales (opcional)</label>
                        <textarea id="notes" rows="4" placeholder="Indique cualquier detalle adicional sobre el trabajo..."></textarea>
                    </div>
                    
                    <div class="button-group">
                        <button type="button" id="send-whatsapp-btn" class="btn btn-whatsapp" disabled>
                            <i class="fab fa-whatsapp"></i> Enviar aceptación por WhatsApp
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script>
        // Variables globales
        let currentDate = new Date();
        let selectedDate = null;
        let calculatedBudget = 0;
        
        // Datos del formulario
        const locationInput = document.getElementById('location');
        const squareMetersInput = document.getElementById('square-meters');
        const furnishedInputs = document.getElementsByName('furnished');
        const roomsInput = document.getElementById('rooms');
        const bathroomsInput = document.getElementById('bathrooms');
        const textureInputs = document.getElementsByName('texture');
        const currentColorInputs = document.getElementsByName('current-color');
        const desiredFinishInput = document.getElementById('desired-finish');
        
        // Botones
        const calculateBtn = document.getElementById('calculate-btn');
        const acceptBudgetBtn = document.getElementById('accept-budget-btn');
        const modifyBudgetBtn = document.getElementById('modify-budget-btn');
        const prevMonthBtn = document.getElementById('prev-month');
        const nextMonthBtn = document.getElementById('next-month');
        const sendWhatsappBtn = document.getElementById('send-whatsapp-btn');
        
        // Secciones
        const clientDataSection = document.getElementById('client-data');
        const budgetSection = document.getElementById('budget-section');
        const calendarSection = document.getElementById('calendar-section');
        
        // Elementos del presupuesto
        const budgetLocation = document.getElementById('budget-location');
        const budgetSquareMeters = document.getElementById('budget-square-meters');
        const budgetFurnished = document.getElementById('budget-furnished');
        const budgetWorkType = document.getElementById('budget-work-type');
        const budgetBasePrice = document.getElementById('budget-base-price');
        const budgetColorSurcharge = document.getElementById('budget-color-surcharge');
        const budgetFurnitureSurcharge = document.getElementById('budget-furniture-surcharge');
        const budgetSmoothingSurcharge = document.getElementById('budget-smoothing-surcharge');
        const budgetTotal = document.getElementById('budget-total');
        
        // Elementos del calendario
        const currentMonthElement = document.getElementById('current-month');
        const calendarDatesElement = document.getElementById('calendar-dates');
        const calendarDaysElement = document.getElementById('calendar-days');
        const selectedDateInput = document.getElementById('selected-date');
        const clientNameInput = document.getElementById('client-name');
        const clientPhoneInput = document.getElementById('client-phone');
        
        // Mensajes
        const messageElement = document.getElementById('message');
        
        // Función para mostrar mensajes
        function showMessage(text, type) {
            messageElement.textContent = text;
            messageElement.className = `message ${type}`;
            messageElement.style.display = 'block';
            
            setTimeout(() => {
                messageElement.style.display = 'none';
            }, 5000);
        }
        
        // Función para calcular el presupuesto
        function calculateBudget() {
            // Validar datos del formulario
            if (!locationInput.value) {
                showMessage('Por favor, ingrese la ubicación de la vivienda.', 'error');
                return;
            }
            
            if (!squareMetersInput.value || squareMetersInput.value < 10) {
                showMessage('Por favor, ingrese un valor válido para los metros cuadrados (mínimo 10).', 'error');
                return;
            }
            
            let furnishedValue = '';
            for (const radio of furnishedInputs) {
                if (radio.checked) {
                    furnishedValue = radio.value;
                    break;
                }
            }
            
            if (!furnishedValue) {
                showMessage('Por favor, indique si la vivienda está amueblada.', 'error');
                return;
            }
            
            if (!roomsInput.value) {
                showMessage('Por favor, seleccione el número de habitaciones.', 'error');
                return;
            }
            
            if (!bathroomsInput.value) {
                showMessage('Por favor, seleccione el número de baños.', 'error');
                return;
            }
            
            let textureValue = '';
            for (const radio of textureInputs) {
                if (radio.checked) {
                    textureValue = radio.value;
                    break;
                }
            }
            
            if (!textureValue) {
                showMessage('Por favor, indique si las paredes tienen textura gotele o son lisas.', 'error');
                return;
            }
            
            let currentColorValue = '';
            for (const radio of currentColorInputs) {
                if (radio.checked) {
                    currentColorValue = radio.value;
                    break;
                }
            }
            
            if (!currentColorValue) {
                showMessage('Por favor, indique cómo están pintadas las paredes actualmente.', 'error');
                return;
            }
            
            if (!desiredFinishInput.value) {
                showMessage('Por favor, seleccione cómo desea pintar la vivienda.', 'error');
                return;
            }
            
            // Obtener valores
            const squareMeters = parseFloat(squareMetersInput.value);
            const desiredFinish = desiredFinishInput.value;
            
            // Calcular precio base según metros cuadrados
            let pricePerSquareMeter = 0;
            
            if (squareMeters < 30) {
                pricePerSquareMeter = 4.5;
            } else if (squareMeters >= 30 && squareMeters < 40) {
                pricePerSquareMeter = 4.25;
            } else if (squareMeters >= 40 && squareMeters < 50) {
                pricePerSquareMeter = 4.0;
            } else if (squareMeters >= 50 && squareMeters < 60) {
                pricePerSquareMeter = 3,8;
            } else if (squareMeters >= 60 && squareMeters < 70) {
                pricePerSquareMeter = 3.6;
            } else if (squareMeters >= 70 && squareMeters < 80) {
                pricePerSquareMeter = 3.5;
            } else if (squareMeters >= 80 && squareMeters <= 100) {
                pricePerSquareMeter = 3.25;
            } else {
                // Para viviendas de más de 100 metros
                pricePerSquareMeter = 3.0;
            }
            
            // Calcular precio base
            let basePrice = 0;
            let workType = '';
            
            if (desiredFinish === 'smooth') {
                // Cálculo para alisar
                basePrice = squareMeters * 2.75 * 12.5;
                workType = 'Alisar paredes';
            } else {
                // Cálculo para pintar
                basePrice = squareMeters * 2.75 * pricePerSquareMeter;
                
                // Determinar tipo de trabajo
                if (desiredFinish === 'white') {
                    workType = 'Pintar en blanco';
                } else if (desiredFinish === 'light-colors') {
                    workType = 'Pintar en colores claros';
                } else if (desiredFinish === 'dark-colors') {
                    workType = 'Pintar en colores oscuros';
                }
            }
            
            // Calcular recargos
            let colorSurcharge = 0;
            let furnitureSurcharge = 0;
            let smoothingSurcharge = 0;
            
            // Recargo por pintar en colores
            if (desiredFinish === 'light-colors' || desiredFinish === 'dark-colors') {
                colorSurcharge = 100;
            }
            
            // Recargo por vivienda amueblada
            if (furnishedValue === 'yes') {
                if (desiredFinish === 'smooth') {
                    furnitureSurcharge = 200; // Recargo especial para alisar con muebles
                } else {
                    furnitureSurcharge = 100;
                }
            }
            
            // Recargo por alisar (ya incluido en el cálculo base)
            if (desiredFinish === 'smooth') {
                smoothingSurcharge = 0; // Ya está incluido en el precio base
            }
            
            // Calcular total
            const total = basePrice + colorSurcharge + furnitureSurcharge + smoothingSurcharge;
            calculatedBudget = total;
            
            // Mostrar resultados en la sección de presupuesto
            budgetLocation.textContent = locationInput.value;
            budgetSquareMeters.textContent = `${squareMeters} m²`;
            budgetFurnished.textContent = furnishedValue === 'yes' ? 'Sí' : 'No';
            budgetWorkType.textContent = workType;
            budgetBasePrice.textContent = `${basePrice.toFixed(2)} €`;
            budgetColorSurcharge.textContent = `${colorSurcharge.toFixed(2)} €`;
            budgetFurnitureSurcharge.textContent = `${furnitureSurcharge.toFixed(2)} €`;
            budgetSmoothingSurcharge.textContent = `${smoothingSurcharge.toFixed(2)} €`;
            budgetTotal.textContent = `${total.toFixed(2)} €`;
            
            // Mostrar sección de presupuesto
            clientDataSection.style.display = 'none';
            budgetSection.style.display = 'block';
            calendarSection.style.display = 'none';
            
            // Desplazar hacia la sección de presupuesto
            budgetSection.scrollIntoView({ behavior: 'smooth' });
            
            showMessage('Presupuesto calculado correctamente.', 'success');
        }
        
        // Función para aceptar el presupuesto y mostrar el calendario
        function acceptBudget() {
            budgetSection.style.display = 'none';
            calendarSection.style.display = 'block';
            
            // Inicializar calendario
            renderCalendar();
            
            // Desplazar hacia la sección del calendario
            calendarSection.scrollIntoView({ behavior: 'smooth' });
        }
        
        // Función para modificar el presupuesto
        function modifyBudget() {
            budgetSection.style.display = 'none';
            clientDataSection.style.display = 'block';
            
            // Desplazar hacia el formulario
            clientDataSection.scrollIntoView({ behavior: 'smooth' });
        }
        
        // Funciones para el calendario
        function renderCalendar() {
            // Configurar mes y año actual
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            // Actualizar encabezado del mes
            const monthNames = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 
                               'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];
            currentMonthElement.textContent = `${monthNames[month]} ${year}`;
            
            // Limpiar calendario
            calendarDaysElement.innerHTML = '';
            calendarDatesElement.innerHTML = '';
            
            // Crear días de la semana
            const dayNames = ['Dom', 'Lun', 'Mar', 'Mié', 'Jue', 'Vie', 'Sáb'];
            for (let i = 0; i < 7; i++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                dayElement.textContent = dayNames[i];
                calendarDaysElement.appendChild(dayElement);
            }
            
            // Obtener primer día del mes
            const firstDay = new Date(year, month, 1);
            const firstDayIndex = firstDay.getDay(); // 0 = Domingo, 1 = Lunes, etc.
            
            // Obtener último día del mes
            const lastDay = new Date(year, month + 1, 0);
            const lastDate = lastDay.getDate();
            
            // Crear días del mes anterior (si es necesario)
            const prevMonthLastDay = new Date(year, month, 0).getDate();
            for (let i = firstDayIndex; i > 0; i--) {
                const dateElement = document.createElement('div');
                dateElement.className = 'calendar-date disabled';
                dateElement.textContent = prevMonthLastDay - i + 1;
                calendarDatesElement.appendChild(dateElement);
            }
            
            // Crear días del mes actual
            const today = new Date();
            for (let i = 1; i <= lastDate; i++) {
                const dateElement = document.createElement('div');
                dateElement.className = 'calendar-date';
                dateElement.textContent = i;
                dateElement.dataset.date = `${year}-${month + 1}-${i}`;
                
                // Verificar si es hoy
                if (year === today.getFullYear() && month === today.getMonth() && i === today.getDate()) {
                    dateElement.style.backgroundColor = '#3498db';
                    dateElement.style.color = 'white';
                }
                
                // Verificar si es la fecha seleccionada
                if (selectedDate && selectedDate.getFullYear() === year && 
                    selectedDate.getMonth() === month && selectedDate.getDate() === i) {
                    dateElement.classList.add('selected');
                }
                
                // Deshabilitar fechas pasadas
                const currentDateObj = new Date(year, month, i);
                if (currentDateObj < today) {
                    dateElement.classList.add('disabled');
                } else {
                    // Agregar evento de clic para fechas futuras
                    dateElement.addEventListener('click', () => selectDate(currentDateObj));
                }
                
                calendarDatesElement.appendChild(dateElement);
            }
            
            // Completar con días del siguiente mes (si es necesario)
            const totalCells = 42; // 6 semanas de 7 días
            const cellsUsed = firstDayIndex + lastDate;
            const nextMonthDays = totalCells - cellsUsed;
            
            for (let i = 1; i <= nextMonthDays; i++) {
                const dateElement = document.createElement('div');
                dateElement.className = 'calendar-date disabled';
                dateElement.textContent = i;
                calendarDatesElement.appendChild(dateElement);
            }
        }
        
        // Función para seleccionar una fecha
        function selectDate(date) {
            selectedDate = date;
            
            // Actualizar input de fecha seleccionada
            const day = date.getDate().toString().padStart(2, '0');
            const month = (date.getMonth() + 1).toString().padStart(2, '0');
            const year = date.getFullYear();
            selectedDateInput.value = `${day}/${month}/${year}`;
            
            // Actualizar selección en el calendario
            const dateElements = document.querySelectorAll('.calendar-date');
            dateElements.forEach(el => {
                el.classList.remove('selected');
                
                if (el.dataset.date === `${year}-${month}-${day}`) {
                    el.classList.add('selected');
                }
            });
            
            // Habilitar botón de WhatsApp si hay datos de contacto
            checkWhatsAppButton();
        }
        
        // Función para cambiar de mes
        function changeMonth(direction) {
            currentDate.setMonth(currentDate.getMonth() + direction);
            renderCalendar();
        }
        
        // Función para verificar si se puede habilitar el botón de WhatsApp
        function checkWhatsAppButton() {
            const name = clientNameInput.value.trim();
            const phone = clientPhoneInput.value.trim();
            
            if (name && phone && selectedDate) {
                sendWhatsappBtn.disabled = false;
            } else {
                sendWhatsappBtn.disabled = true;
            }
        }
        
        // Función para enviar por WhatsApp
        function sendWhatsApp() {
            const name = clientNameInput.value.trim();
            const phone = clientPhoneInput.value.trim();
            
            if (!name || !phone || !selectedDate) {
                showMessage('Por favor, complete todos los datos antes de enviar.', 'error');
                return;
            }
            
            // Formatear fecha
            const day = selectedDate.getDate().toString().padStart(2, '0');
            const month = (selectedDate.getMonth() + 1).toString().padStart(2, '0');
            const year = selectedDate.getFullYear();
            const formattedDate = `${day}/${month}/${year}`;
            
            // Crear mensaje
            const message = `Hola, soy ${name}. Quiero confirmar el presupuesto de pintura para mi vivienda en ${locationInput.value}.\n` +
                           `Presupuesto: ${calculatedBudget.toFixed(2)} €\n` +
                           `Fecha solicitada: ${formattedDate}\n` +
                           `Metros cuadrados: ${squareMetersInput.value} m²\n` +
                           `Teléfono de contacto: ${phone}`;
            
            // Codificar mensaje para URL
            const encodedMessage = encodeURIComponent(message);
            
            // Crear enlace de WhatsApp
            const whatsappLink = `https://wa.me/641958759?text=${encodedMessage}`;
            
            // Abrir WhatsApp en una nueva pestaña
            window.open(whatsappLink, '_blank');
            
            showMessage('Redirigiendo a WhatsApp para enviar el mensaje...', 'success');
        }
        
        // Event Listeners
        calculateBtn.addEventListener('click', calculateBudget);
        acceptBudgetBtn.addEventListener('click', acceptBudget);
        modifyBudgetBtn.addEventListener('click', modifyBudget);
        
        prevMonthBtn.addEventListener('click', () => changeMonth(-1));
        nextMonthBtn.addEventListener('click', () => changeMonth(1));
        
        clientNameInput.addEventListener('input', checkWhatsAppButton);
        clientPhoneInput.addEventListener('input', checkWhatsAppButton);
        sendWhatsappBtn.addEventListener('click', sendWhatsApp);
        
        // Inicializar calendario con días de la semana
        const dayNames = ['Dom', 'Lun', 'Mar', 'Mié', 'Jue', 'Vie', 'Sáb'];
        dayNames.forEach(day => {
            const dayElement = document.createElement('div');
            dayElement.className = 'calendar-day';
            dayElement.textContent = day;
            calendarDaysElement.appendChild(dayElement);
        });
        
        // Datos de ejemplo para facilitar pruebas
        window.addEventListener('DOMContentLoaded', () => {
            // Rellenar con datos de ejemplo (solo para pruebas)
            locationInput.value = "Centro de Madrid";
            squareMetersInput.value = "75";
            document.getElementById('furnished-yes').checked = true;
            roomsInput.value = "3";
            bathroomsInput.value = "2";
            document.getElementById('texture-gotele').checked = true;
            document.getElementById('current-colors').checked = true;
            desiredFinishInput.value = "light-colors";
        });
    </script>
</body>
</html>